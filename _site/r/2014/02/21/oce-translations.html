<!DOCTYPE HTML>
<html>
<head>
<link rel='stylesheet' type='text/css' href='/css/syntax.css' />
<link rel='stylesheet' type='text/css' href='/css/style.css' />
<meta charset="UTF-8">
<title>Oce translations</title>
</head>

<body>
<div class="navbar">
    <!-- <div class="navbar-inner"> -->
        <!-- <a class="brand" href="/index.html">Dan Kelley</a> -->
        <!-- <div class="nav">Dan Kelley</div> -->
        <ul class="navbar">
            
            <li><a href="/index.html">Dan Kelley</a></li>
            

            
            <li><a href="/publications.html">Publications</a></li>
            

            
            <li><a href="/textbook.html">Textbook</a></li>
            

            
            <li><a href="/software.html">Software</a></li>
            
            
            <li><a class="highlight" href="/blog">Blog</a></li>
            

        </ul>
        <!-- </div> -->
</div>

<div id="content">
    




<!-- <div class="span8"> -->

<div class=topnav>

<!-- | <a href='/blog'>Home</a> | -->

<a class="pagination" href="/r/2014/02/19/filtfilt.html" title="Improved filtfilt() for R">
    <!-- &larr; --> Previous
</a>

</div> <!-- topnav -->


<div class="page-header">

    <div class=post_title>Oce translations</div>
<!-- </div> --> <!-- span8 -->

<!-- <div class="span4"> -->

<div class=slug>
    <span class=post_date>
        Feb 21, 2014
    </span> <!-- post_date -->
    <span class=post_tags>
        
        <a href="/tags/R/index.html" class="tag">
            R
        </a>
         &#183; 
        
        <a href="/tags/oce/index.html" class="tag">
            oce
        </a>
        
        
    </span> <!-- post_date -->
    <div class=post_summary>
        The Oce scheme for adding translated axis labels is described.
    </div> <!-- post_summary -->
</div> <!-- slug ->

<!-- </div> -->
<!-- span4 -->
</div> <!-- page-header -->



<p>A new user wondered how to get Spanish labels on axes, so I did some reading and got some help from R-help. This posting describes what I did, in hopes that it will smooth the path to doing this in another language. I am not entirely clear that the steps I document here are the ones I took, or that anyone else should take, since I got somewhat mixed up in the process (and was grateful to get help from BR on R-help). I may revise this posting later, if I add a new language and get clearer on the steps. Readers are advised to exercise care if copying my procedure, and to consult the many other websites dealing with text translation (and how it is done in R).</p>

<h2 id="initial_work_cycle">Initial work cycle</h2>

<h3 id="step_1">Step 1</h3>

<p>Create a directory named <code>oce/po/</code>.</p>

<h3 id="step_2">Step 2</h3>

<p>Add some text like <code>gettext(&quot;Pressure&quot;)</code> in the <code>resizableLabel()</code> function in <code>oce/R/misc.R</code>. This, and other text strings, will be scanned by the next step.</p>

<h3 id="step_3">Step 3</h3>

<p>Enter the <code>oce</code> directory, launch R, and type as follows, to will insert a file named <code>R-oce.pot</code> in the <code>po</code> directory. (Actually, I am not sure if a step has to be done before this one… possibly one has to do <code>msginit</code> in the <code>po</code> directory.)</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='r'>1
2</code></pre></div></td><td class='code'><div class='highlight'><pre>library<span class='p'>(</span>tools<span class='p'>)</span>
update_pkg_po<span class='p'>(</span><span class='s'>&quot;.&quot;</span><span class='p'>)</span>
</pre></div>
</td></tr></table>
<h3 id="step_4">Step 4</h3>

<p>To start work on, say, a French translation table, type the following in the shell.</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='bash'>1
2</code></pre></div></td><td class='code'><div class='highlight'><pre><span class='nb'>cd </span>oce/po
msginit --locale<span class='o'>=</span>R-fr --input R-oce.pot
</pre></div>
</td></tr></table>
<p>(This initialization must be done with every new language added, with <code>fr</code> replaced by the two-letter locale code for the language. It is also necessary to change the <code>charset</code> to <code>UTF-8</code>, for most languages.</p>

<h3 id="step_5">Step 5</h3>

<p>Edit <code>po/R-fr.po</code> as desired, inserting translations. The easiest way is to insert accents is with the text editor, and for this to work it will be necessary to edit one of the lines near the top of this file to read <code>Content-Type: text/plain; charset=UTF-8</code>. In doing the translation, I focussed on words used on axes, and worked on translations at the same time as I added <code>gettext()</code> calls to especially <code>resizableLabel()</code> in <code>R/misc.R</code>.</p>

<h2 id="update_work_cycle">Update work cycle</h2>

<p>Here I am a bit foggy. I think the work cycle (say, for French) is:</p>

<p>Edit your source code … repeat step 3 … build your package and test.</p>

<p>(NOTE: once, I thought step 3 had to be accompanied with <code>msgmerge --update R-fr.po R-oce.pot</code> in the shell, but now I do not think this is needed.)</p>

<p>As an example, the following tests some CTD plots in English, Spanish, and French.</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='r'>1
2
3
4
5
6
7
8</code></pre></div></td><td class='code'><div class='highlight'><pre>library<span class='p'>(</span>oce<span class='p'>)</span>
data<span class='p'>(</span>ctd<span class='p'>)</span>
par<span class='p'>(</span>mfrow <span class='o'>=</span> c<span class='p'>(</span><span class='m'>1</span><span class='p'>,</span> <span class='m'>3</span><span class='p'>))</span>
plotProfile<span class='p'>(</span>ctd<span class='p'>,</span> <span class='s'>&quot;T&quot;</span><span class='p'>)</span>
Sys.setenv<span class='p'>(</span>LANGUAGE <span class='o'>=</span> <span class='s'>&quot;es&quot;</span><span class='p'>)</span>
plotProfile<span class='p'>(</span>ctd<span class='p'>,</span> <span class='s'>&quot;T&quot;</span><span class='p'>)</span>
Sys.setenv<span class='p'>(</span>LANGUAGE <span class='o'>=</span> <span class='s'>&quot;fr&quot;</span><span class='p'>)</span>
plotProfile<span class='p'>(</span>ctd<span class='p'>,</span> <span class='s'>&quot;T&quot;</span><span class='p'>)</span>
</pre></div>
</td></tr></table>
<p>This produces the graph shown below (click to enlarge).</p>

<p><a href="/assets/2014-02-21-oce-translations.png"><img src="/assets/2014-02-21-oce-translations-thumbnail.png" alt="center" /></a></p>

<p>Instead of using <code>Sys.setenv()</code> one can define the language in the shell, as (temporarily) in the following invocation.</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='bash'>1</code></pre></div></td><td class='code'><div class='highlight'><pre><span class='nv'>LANG</span><span class='o'>=</span>es_ES.UTF-8 R --no-save &lt; spanish.R
</pre></div>
</td></tr></table>
<h2 id="how_to_help_with_oce_translations">How to help with Oce translations</h2>

<p>At the moment, Oce works in English, with some support for Spanish and French, and just a few test words for Mandarin. (For Mandarine, be sure to specify your PDF plot device as e.g. <code>pdf(..., family=&quot;BG1&quot;)</code> so that proper fonts will be loaded.)</p>

<p>If you would like Oce graphs to work in another language with which you have high familiarity, please contact me. I will need you to write down a few relevant words in your language and send them to me via PDF or scanned hand-written document (MSword and OpenOffice formats cannot are not useful). Minimally, the words should be the ones used on axes of the graphs you use, but it would help other users if you could translate the phrases listed below. Also, translate <code>E</code>, <code>W</code>, <code>N</code>, and <code>S</code>, as used in longitude and latitude, as well as any other unit abbreviations that differ between English and your language.</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='bash'> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</code></pre></div></td><td class='code'><div class='highlight'><pre>Absolute Salinity
Conservative Temperature
Depth
Distance
Elevation
Longitude
Latitude
Potential Temperature
Potential Density Anomaly
Practical Salinity
Pressure
Sea Level
Speed
Temperature
Velocity
</pre></div>
</td></tr></table>
<p>For some languages (especially Asian ones) it is best to send me a UTF-8 file with the translated phrases that I can copy and paste into the source files. For example, below is a screenshot showing a rough guess at Mandarin, which I found by using an onine translation engine.</p>

<p><img src="/assets/2012-02-21-translation-editor.png" alt="center" /></p>

<h2 id="status_of_translation_effort">Status of translation effort</h2>

<p>I am doing translations a bit at a time, starting with languages that are popular with Oce users. Those who would like to follow the progress should consult my <a href="https://www.dropbox.com/sh/301wmxm4ddnv68v/7G85OTScZq">Dropbox page</a> in which I test languages as I add them. The first step is usually to get CTD plots working, because these are so commonly done, and after that I move on to ADP and ADV plots.</p>

<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'dankelleydalhousie'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
 dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

<p class="footnote">This website is written in <a
href="http://jekyllrb.com">Jekyll</a>, and the source is available on <a
href="https://github.com/dankelley/dankelley.github.io">GitHub</a>.</p>

</body>
</html>

